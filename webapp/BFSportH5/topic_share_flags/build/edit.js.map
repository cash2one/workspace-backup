{"version":3,"sources":["webpack:///./src/edit.js","webpack:///./src/edit.css","webpack:///./src/components/edit-image/edit-image.js","webpack:///./src/components/edit-image/slick.css","webpack:///./src/components/edit-image/style.css","webpack:///external \"fabric\"","webpack:///./src/components/edit-image/edit-image-top-bar.js","webpack:///./src/components/edit-image/edit-image-main.js","webpack:///external \"Slider\"","webpack:///./src/components/edit-image/edit-image-bar.js","webpack:///./src/components/edit-txt-send/edit-txt-send.js","webpack:///./src/components/edit-txt-send/style.css","webpack:///./src/components/dialog-box/dialog-box.js","webpack:///./src/components/dialog-box/style.css"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;;;AACA;;KAAY,K;;AACZ;;KAAY,Q;;AACZ;;;;AACA;;;;AACA;;;;;;;;;;;;;;AAEA;;;KAGM,I;;;AACF,mBAAY,KAAZ,EAAmB;AAAA;;AAGf;AAHe,6FACT,KADS;;AAAA,eA2DnB,iBA3DmB,GA2DC,UAAC,EAAD,EAAK,GAAL,EAAa;AAC7B,iBAAI,GAAJ,EAAS,eAAS,SAAT,GAAqB,GAArB;AACT,mBAAK,QAAL,CAAc,EAAC,YAAY,EAAb,EAAd;AACH,UA9DkB;;AAAA,eAmEnB,kBAnEmB,GAmEE,YAAM;AACvB,mBAAK,QAAL,CAAc,EAAC,cAAc,KAAf,EAAd;AACH,UArEkB;;AAAA,eAuEnB,OAvEmB,GAuET,UAAC,EAAD,EAAQ;AACd,iBAAI,EAAJ,EAAQ;AACJ,mBAAE,IAAF,CAAO;AACH,2BAAM,KADH;AAEH,0BAAK,UAAI,aAAJ,GAAoB,EAFtB;AAGH;AACA,+BAAU,MAJP;AAKH,8BAAS,GALN;AAMH,8BAAS,UAAU,IAAV,EAAgB;AACrB,6BAAI,IAAI,KAAK,KAAL,GAAa,GAAb,GAAmB,EAA3B;AACA,wCAAK,iBAAL,GAAyB,YAAM,OAAN,CAAc,CAAd,CAAzB;AACA,wCAAK,SAAL,GAAiB,YAAM,OAAN,CAAc,KAAK,KAAnB,CAAjB;AACA,8BAAK,SAAL;AACH,sBALQ,CAKP,IALO,OANN;AAYH,4BAAO,UAAU,GAAV,EAAe,IAAf,EAAqB;AACxB,iCAAQ,GAAR,CAAY,UAAI,aAAJ,GAAoB,EAAhC;AACH,sBAFM,CAEL,IAFK;AAZJ,kBAAP;AAiBH;AACJ,UA3FkB;;AAAA,eA6FnB,SA7FmB,GA6FP,YAAM;AACd,eAAE,IAAF,CAAO;AACH,uBAAM,MADH;AAEH,0BAAS,GAFN;AAGH,sBAAK,UAAI,WAHN;AAIH,uBAAM;AACF,yBAAI,eAAK,KADP;AAEF,+BAAU,YAAM,OAAN,CAAc,eAAK,OAAnB,CAFR;AAGF,4BAAO,eAAK;AAHV,kBAJH;AASH,wBAAO,UAAU,GAAV,EAAe,IAAf,EAAqB;AACxB,6BAAQ,GAAR,CAAY,UAAI,WAAhB;AACH,kBAFM,CAEL,IAFK;AATJ,cAAP;AAcH,UA5GkB;;AAIf,qBAAM,iBAAN;;AAEA;AACA,qBAAM,kBAAN;;AAEA;AACA,kBAAS,KAAT,GAAiB,eAAK,UAAtB;;AAEA;;;;AAIA,eAAK,KAAL,GAAa;AACT,yBAAY,eAAS,UADZ;AAET,2BAAc,QAAS,eAAS,UAAT,IAAuB,CAAxB,IAA8B,CAAC,eAAK,KAA5C;AAFL,UAAb;AAhBe;AAoBlB;;;;6CAEmB;AAChB;AACA,kBAAK,OAAL,CAAa,eAAK,KAAlB;AACH;;;kCAEQ;;AAEL;AACA,iBAAI,mBAAmB,IAAvB;AACA,iBAAI,KAAK,KAAL,CAAW,YAAf,EAA6B;AACzB,qBAAI,cAAc;AACd,8BAAS,OADK;AAEd,2BAAM,iDAFQ;AAGd,8BAAS,MAHK;AAId,4BAAO,IAJO;AAKd,mCAAc,KAAK;AALL,kBAAlB;AAOA,oCAAmB,yCAAe,WAAf,CAAnB;AACH;;AAED,oBACI;AAAA;AAAA,mBAAK,WAAU,UAAf;AACI,4DAAW,YAAY,KAAK,KAAL,CAAW,UAAlC,EAA8C,mBAAmB,KAAK,iBAAtE,GADJ;AAEI,8DAAa,YAAY,KAAK,KAAL,CAAW,UAApC;AACa,gCAAW,eAAS,SADjC;AAEa,2BAAM,eAAS,IAF5B;AAGa,wCAAmB,KAAK,iBAHrC,GAFJ;AAMK;AANL,cADJ;AAUH;;AAED;;;;;;;AAUA;;;;;;;GAjEe,MAAM,S;;AAgHzB,UAAS,MAAT,CAAgB,oBAAC,IAAD,OAAhB,EAA0B,SAAS,cAAT,CAAwB,WAAxB,CAA1B,E;;;;;;;;;;AC7HA,0C;;;;;;;;;;;;;;;;;;ACAA;;AACA;;AACA;;;;AACA;;;;AACA;;;;AACA;;KAAY,K;;AACZ;;;;AACA;;;;AACA;;;;;;;;;;;;;;AAEA;;;;AAIA,KAAM,uBAAuB;AACzB,iBAAY,EADa;AAEzB,yBAAoB,KAFK;AAGzB,cAAS,EAHgB;AAIzB,kBAAa,sBAJY;AAKzB,kBAAa,uBALY;AAMzB,wBAAmB,sBANM;AAOzB,kBAAa,QAPY;AAQzB,8BAAyB,GARA;AASzB,wBAAmB,GATM;AAUzB,0BAAqB,EAVI;AAWzB,qBAAgB;AAXS,EAA7B;;AAcA;;;;KAGqB,S;;;AAMjB,wBAAY,KAAZ,EAAmB;AAAA;;AAAA,kGACT,KADS;;AAAA,eAwCnB,aAxCmB,GAwCH,UAAC,KAAD,EAAW;AACvB,mBAAM,cAAN;;AAEA,gCAAI,SAAS,aAAT,CAAuB,cAAvB,EAAuC,KAAvC,CAA6C,CAA7C,CAAJ,EAAqD,EAAC,OAAO,GAAR,EAArD,EACK,IADL,CACU,UAAU,GAAV,EAAe;AACjB,sBAAK,QAAL,CAAc,EAAC,OAAO,IAAI,MAAZ,EAAd;AACA,wBAAO,GAAP;AACH,cAHK,CAGJ,IAHI,OADV,EAKK,KALL,CAKW,UAAU,GAAV,EAAe;AAClB;AACH,cAPL,EAQK,MARL,CAQY,YAAY;AAChB;AACH,cAVL;AAWH,UAtDkB;;AAAA,eA4DnB,cA5DmB,GA4DF,UAAC,KAAD,EAAW;AACxB,mBAAM,cAAN;AACA,oBAAO,QAAP,CAAgB,IAAhB,GAAuB,YAAM,YAAN,KAAuB,aAAvB,GAAuC,OAAO,QAAP,CAAgB,MAA9E;AACH,UA/DkB;;AAAA,eAqEnB,eArEmB,GAqED,UAAC,KAAD,EAAW;AACzB,mBAAM,cAAN;AACA;AACA,iBAAI,QAAQ,OAAO,MAAM,aAAN,CAAoB,YAApB,CAAiC,YAAjC,CAAP,CAAZ;AACA,iBAAI,UAAU,MAAK,KAAL,CAAW,iBAAzB,EAA4C;AACxC,uBAAK,QAAL,CAAc,EAAC,mBAAmB,KAApB,EAAd;AACA,uBAAK,gBAAL,CAAsB,KAAtB;AACH;AACJ,UA7EkB;;AAAA,eA+EnB,WA/EmB,GA+EL,UAAC,KAAD,EAAW;AACrB;AACA,mBAAM,cAAN;;AAEA;AACA,mBAAK,UAAL,CAAgB,aAAhB;;AAEA;AACA,iBAAI,QAAQ,IAAI,iBAAO,KAAX,CAAiB,SAAS,aAAT,CAAuB,uBAAvB,CAAjB,CAAZ;AACA;AACA,mBAAK,UAAL,CAAgB,kBAAhB,CAAmC,KAAnC;AACA,iBAAI,YAAY,SAAS,aAAT,CAAuB,8BAAvB,CAAhB;AACA,iBAAI,UAAU,IAAd;AACA,iBAAI,SAAJ,EAAe;AACX,2BAAU,IAAI,iBAAO,KAAX,CAAiB,SAAjB,CAAV;AACA;AACA,uBAAK,UAAL,CAAgB,eAAhB,CAAgC,OAAhC;AACH;AACD,mBAAK,UAAL,CAAgB,eAAhB,GAAkC,uBAAlC;;AAEA;AACA,iBAAI,UAAU,MAAK,UAAL,CAAgB,SAAhB,CAA0B,EAAC,QAAQ,MAAT,EAAiB,OAAO,GAAxB,EAA6B,QAAQ,GAArC,EAA0C,SAAS,GAAnD,EAAwD,YAAY,CAApE,EAA1B,CAAd;;AAEA;AACA;;AAEA;;AAEA;AACA,mBAAK,KAAL,CAAW,iBAAX,CAA6B,CAA7B,EAAgC,OAAhC;;AAEA,mBAAK,UAAL,CAAgB,MAAhB,CAAuB,KAAvB;AACA,mBAAK,UAAL,CAAgB,MAAhB,CAAuB,OAAvB;AACA,mBAAK,UAAL,CAAgB,eAAhB,GAAkC,EAAlC;AACH,UAjHkB;;AAAA,eAsHnB,UAtHmB,GAsHN,YAAM;AACf;AACA,mBAAK,UAAL,GAAkB,IAAI,iBAAO,MAAX,CACd,YADc,EAEd,EAAC,OAAO,GAAR,EAAa,QAAQ,GAArB,EAA0B,WAAW,KAArC,EAA4C,qBAAqB,IAAjE,EAAuE,sBAAsB,IAA7F,EAFc,CAAlB;;AAKA;AACA,iBAAI,gBAAJ;AAAA,iBAAa,iBAAb;AACA,mBAAK,UAAL,CAAgB,EAAhB,CAAmB,eAAnB,EAAoC,UAAC,CAAD,EAAM;AACtC,qBAAI,MAAM,EAAE,MAAZ;AACA,qBAAI,SAAJ;AACA,qBAAI,IAAI,qBAAJ,CAA0B,IAAI,iBAAO,KAAX,CAAiB,CAAjB,EAAoB,CAApB,CAA1B,EAAkD,IAAI,iBAAO,KAAX,CAAiB,GAAjB,EAAsB,GAAtB,CAAlD,CAAJ,EAAmF;AAC/E,+BAAU,IAAI,GAAd;AACA,gCAAW,IAAI,IAAf;AACH,kBAHD,MAGO;AACH,yBAAI,MAAJ,CAAW,OAAX;AACA,yBAAI,OAAJ,CAAY,QAAZ;AACH;AACJ,cAVD;;AAYA;AACA,mBAAK,UAAL,CAAgB,EAAhB,CAAmB,iBAAnB,EAAsC,UAAC,CAAD,EAAM;AACxC,uBAAK,UAAL,CAAgB,mBAAhB,GAAsC,KAAtC;AACH,cAFD;AAGA;AACA,mBAAK,UAAL,CAAgB,EAAhB,CAAmB,mBAAnB,EAAwC,UAAC,CAAD,EAAM;AAC1C,uBAAK,UAAL,CAAgB,mBAAhB,GAAsC,IAAtC;AACH,cAFD;;AAIA;AACA,iBAAI,UAAU,eAAS,mBAAT,CAA6B,CAA7B,EAAgC,GAAhC,GAAsC,UAApD;AACA,iBAAI,UAAU,eAAS,mBAAT,CAA6B,CAA7B,EAAgC,GAAhC,GAAsC,WAApD;AACA,mBAAK,cAAL,CAAoB,OAApB,EAA6B,EAAC,MAAM,GAAP,EAAY,KAAK,GAAjB,EAA7B,EAAoD,CAApD;AACA,mBAAK,cAAL,CAAoB,OAApB,EAA6B,EAAC,MAAM,GAAP,EAAY,KAAK,GAAjB,EAA7B,EAAoD,CAApD;AACH,UAzJkB;;AAAA,eAiKnB,cAjKmB,GAiKF,UAAC,GAAD,EAAM,OAAN,EAAe,KAAf,EAAyB;AACtC,8BAAO,KAAP,CAAa,OAAb,CAAqB,GAArB,EAA0B,UAAC,IAAD,EAAU;AAChC,sBAAK,GAAL,CAAS,OAAO,MAAP,CAAc,EAAd,EAAkB,oBAAlB,EAAwC,OAAxC,CAAT;AACA,uBAAK,UAAL,CAAgB,QAAhB,CAAyB,IAAzB,EAA+B,KAA/B;AACH,cAHD;AAIH,UAtKkB;;AAAA,eA2KnB,gBA3KmB,GA2KA,UAAC,KAAD,EAAW;AAC1B;;;;;AAKA,sBAAS,UAAT,CAAoB,GAApB,EAAyB;AACrB,qBAAI,UAAU,EAAd;AACA,yBAAQ,IAAR,GAAe,IAAI,OAAJ,EAAf;AACA,yBAAQ,GAAR,GAAc,IAAI,MAAJ,EAAd;AACA,yBAAQ,KAAR,GAAgB,IAAI,QAAJ,EAAhB;AACA,yBAAQ,MAAR,GAAiB,IAAI,SAAJ,EAAjB;AACA,yBAAQ,MAAR,GAAiB,IAAI,SAAJ,EAAjB;AACA,yBAAQ,KAAR,GAAgB,IAAI,QAAJ,EAAhB;AACA,yBAAQ,KAAR,GAAgB,IAAI,QAAJ,EAAhB;AACA,wBAAO,OAAP;AACH;;AAED,iBAAI,eAAe,WAAW,MAAK,UAAL,CAAgB,IAAhB,CAAqB,CAArB,CAAX,CAAnB;AACA,iBAAI,eAAe,WAAW,MAAK,UAAL,CAAgB,IAAhB,CAAqB,CAArB,CAAX,CAAnB;AACA,mBAAK,UAAL,CAAgB,KAAhB;AACA,iBAAI,UAAU,eAAS,mBAAT,CAA6B,KAA7B,EAAoC,GAApC,GAA0C,UAAxD;AACA,iBAAI,UAAU,eAAS,mBAAT,CAA6B,KAA7B,EAAoC,GAApC,GAA0C,WAAxD;AACA,mBAAK,cAAL,CAAoB,OAApB,EAA6B,YAA7B,EAA2C,CAA3C;AACA,mBAAK,cAAL,CAAoB,OAApB,EAA6B,YAA7B,EAA2C,CAA3C;AACH,UApMkB;;AAGf,eAAK,KAAL,GAAa;AACT,gCAAmB,CADV;AAET,oBAAO,YAAM,aAAN,CAAoB,kBAAY,SAAhC;AAFE,UAAb;AAHe;AAOlB;;;;6CAEmB;AAChB,kBAAK,UAAL;AACH;;;kCAEQ;AACL;AACA;AACA,iBAAI,WAAW,EAAC,SAAS,MAAV,EAAf;AACA,iBAAI,KAAK,KAAL,CAAW,UAAX,KAA0B,CAA9B,EAAiC,WAAW,EAAC,SAAS,OAAV,EAAX;;AAEjC,oBACI;AAAA;AAAA,mBAAK,WAAU,WAAf,EAA2B,OAAO,QAAlC;AACI,kEAAiB,OAAO,eAAK,UAA7B;AACiB,qCAAgB,KAAK,cADtC;AAEiB,oCAAe,KAAK,aAFrC,GADJ;AAII,gEAAe,IAAI,KAAK,KAAL,CAAW,KAA9B;AACe,2BAAM,eAAS,UAD9B,GAJJ;AAMI,+DAAc,OAAO,KAAK,KAAL,CAAW,iBAAhC;AACc,2BAAM,eAAS,mBAD7B;AAEc,sCAAiB,KAAK,eAFpC,GANJ;AASI;AAAA;AAAA,uBAAQ,WAAU,SAAlB,EAA4B,SAAS,KAAK,WAA1C;AAAA;AAAA,kBATJ;AAUI;AAAA;AAAA,uBAAK,WAAU,MAAf;AAAA;AAAA;AAVJ,cADJ;AAeH;;AAED;;;;;;AAoBA;;;;;;AASA;;;;;;AAkDA;;;;;AAwCA;;;;;;;;AAaA;;;;;;;GA9KmC,MAAM,S;;AAAxB,U,CACV,S,GAAY;AACf,wBAAmB,MAAM,SAAN,CAAgB,IAAhB,CAAqB,UADzB,EACqC;AACpD,iBAAY,MAAM,SAAN,CAAgB,MAAhB,CAAuB,UAFpB,CAE+B;AAF/B,E;mBADF,S;;;;;;;;;;AC/BrB,0C;;;;;;;;;;ACAA,0C;;;;;;;;;;ACAA,yB;;;;;;;;;;;;;;;;;;ACAA;;AACA;;KAAY,K;;;;;;;;;;AAEZ;;;KAGqB,e;;;;;;;;;;;kCAOR;AACL,oBACI;AAAA;AAAA,mBAAK,WAAU,QAAf;AACI;AAAA;AAAA,uBAAQ,WAAU,MAAlB,EAAyB,SAAS,KAAK,KAAL,CAAW,cAA7C;AAAA;AAAA,kBADJ;AAEI;AAAA;AAAA;AAAM,0BAAK,KAAL,CAAW;AAAjB,kBAFJ;AAGI;AAAA;AAAA,uBAAK,WAAU,MAAf;AAAA;AACI,oDAAO,WAAU,aAAjB,EAA+B,MAAK,MAApC,EAA2C,SAAQ,QAAnD,EAA4D,QAAO,SAAnE,EAA6E,IAAG,MAAhF;AACO,mCAAU,KAAK,KAAL,CAAW,aAD5B;AADJ;AAHJ,cADJ;AAUH;;;;GAlBwC,MAAM,S;;AAA9B,gB,CACV,S,GAAY;AACf,YAAO,MAAM,SAAN,CAAgB,MAAhB,CAAuB,UADf;AAEf,qBAAgB,MAAM,SAAN,CAAgB,IAAhB,CAAqB,UAFtB;AAGf,oBAAe,MAAM,SAAN,CAAgB,IAAhB,CAAqB;AAHrB,E;mBADF,e;;;;;;;;;;;;;;;;;;;;ACNrB;;KAAY,K;;AACZ;;;;;;;;;;;;;;AAEA;;;KAGqB,a;;;;;;;;;;;kCAOR;AACL;AACA,iBAAI,WAAW;AACX,2BAAU,IADC;AAEX,+BAAc,CAFH;AAGX,iCAAgB,CAHL;AAIX,4BAAW;AAJA,cAAf;;AAOA,iBAAI,OAAO,KAAK,KAAL,CAAW,IAAX,CAAgB,GAAhB,CAAoB,UAAU,IAAV,EAAgB;AAC3C,wBAAO;AAAA;AAAA;AAAK,kDAAK,KAAK,IAAV;AAAL,kBAAP;AACH,cAFU,CAAX;;AAIA;AACA,kBAAK,OAAL,CAAa,gCAAb;;AAEA,oBACI;AAAA;AAAA,mBAAK,WAAU,eAAf;AACI,8CAAK,WAAU,OAAf,EAAuB,KAAK,KAAK,KAAL,CAAW,EAAvC,GADJ;AAEI,iDAAQ,IAAG,YAAX,GAFJ;AAGI;AAAA;AAAA,gCAAQ,WAAU,WAAlB,IAAkC,QAAlC;AACK;AADL;AAHJ,cADJ;AAUH;;;;GAjCsC,MAAM,S;;AAA5B,c,CACV,S,GAAY;AACf,SAAI,MAAM,SAAN,CAAgB,MAAhB,CAAuB,UADZ;AAEf,WAAM,MAAM,SAAN,CAAgB,KAAhB,CAAsB;;AAFb,E;mBADF,a;;;;;;;;;;ACNrB,yB;;;;;;;;;;;;;;;;;;ACAA;;KAAY,K;;AACZ;;;;;;;;;;;;;;AAEA;;;KAGqB,Y;;;;;;;;;;;kCAOR;AAAA;;AACL;AACA,iBAAI,WAAW;AACX,2BAAU,KADC;AAEX,+BAAc,CAFH;AAGX,iCAAgB,CAHL;AAIX,yBAAQ;AAJG,cAAf;;AAOA,iBAAI,OAAO,KAAK,KAAL,CAAW,IAAX,CAAgB,GAAhB,CAAoB,UAAC,IAAD,EAAO,KAAP,EAAiB;AAC5C;AACA,qBAAI,WAAW,EAAf;AACA,qBAAI,UAAU,OAAK,KAAL,CAAW,KAAzB,EAAgC,WAAW,gBAAX;AAChC,wBAAO;AAAA;AAAA,uBAAK,WAAW,QAAhB,EAA0B,SAAS,OAAK,KAAL,CAAW,eAA9C;AACH,kDAAK,KAAK,KAAK,GAAL,GAAW,MAArB,GADG;AAEH;AAAA;AAAA;AAAM,8BAAK;AAAX;AAFG,kBAAP;AAIH,cARU,CAAX;;AAUA,oBACI;AAAA;AAAA,mBAAK,WAAU,cAAf;AACI;AAAA;AAAY,6BAAZ;AACK;AADL;AADJ,cADJ;AAOH;;;;GAjCqC,MAAM,S;;AAA3B,a,CACV,S,GAAY;AACf,WAAM,MAAM,SAAN,CAAgB,KAAhB,CAAsB,UADb;AAEf,YAAO,MAAM,SAAN,CAAgB,MAAhB,CAAuB,UAFf;AAGf,sBAAiB,MAAM,SAAN,CAAgB,IAAhB,CAAqB;AAHvB,E;mBADF,Y;;;;;;;;;;;;;;;;;;ACNrB;;AACA;;;;AACA;;KAAY,K;;AACZ;;;;;;;;;;;;;;AAEA;;;AAGA,KAAM,gBAAgB,CAClB,QADkB,EAElB,MAFkB,EAGlB,MAHkB,EAIlB,OAJkB,EAKlB,OALkB,EAMlB,WANkB,CAAtB;;AASA;;;;KAGqB,W;;;AAQjB,0BAAY,KAAZ,EAAmB;AAAA;;AAAA,oGACT,KADS;;AAAA,eAuFnB,YAvFmB,GAuFJ,YAAM;AACjB;;;;AAIA,iBAAI,MAAK,KAAL,CAAW,IAAf,EAAqB;AACjB,uBAAK,QAAL,CAAc,EAAC,oBAAoB,CAArB,EAAd;AACH,cAFD,MAEO;AACH,uBAAK,mBAAL;AACH;AACJ,UAjGkB;;AAAA,eAsGnB,WAtGmB,GAsGL,YAAM;AAChB;AACA;AACA,iBAAI,eAAK,iBAAT,EAA4B;AACxB,uBAAK,QAAL,CAAc,EAAC,oBAAoB,CAArB,EAAd;AACA,uBAAK,WAAL;AACH,cAHD,MAGO;AACH,qBAAI,MAAK,KAAL,CAAW,IAAf,EAAqB;AACjB,oCAAS,IAAT,GAAgB,YAAM,YAAN,CAAmB,MAAK,KAAL,CAAW,IAA9B,EAAoC,IAApC,CAAhB;AACH;;AAED;AACA,6BAAM,kBAAN;AACA;AACA,qBAAI,MAAM,mBAAmB,OAAO,QAAP,CAAgB,IAAnC,CAAV;AACA,wBAAO,QAAP,CAAgB,IAAhB,GAAuB,aAAO,QAAP,GAAkB,GAAlB,GAAwB,eAAxB,GAA0C,GAAjE;AACH;AAEJ,UAxHkB;;AAAA,eA6HnB,WA7HmB,GA6HL,YAAM;AAChB;AACA,iBAAI,YAAY,WAAW,YAAY;AACnC,qBAAI,aAAa,IAAjB,EAAuB,KAAK,QAAL,CAAc,EAAC,oBAAoB,CAArB,EAAd;AAC1B,cAF0B,CAEzB,IAFyB,OAAX,EAEF,GAFE,CAAhB;;AAIA,iBAAI,MAAM,IAAI,cAAJ,EAAV;AACA,iBAAI,OAAJ,GAAc,GAAd;AACA,iBAAI,IAAJ,CAAS,MAAT,EAAiB,UAAI,WAArB;AACA,iBAAI,MAAJ,GAAa,UAAU,CAAV,EAAa;AACtB,qBAAI,IAAI,MAAJ,KAAe,GAAnB,EAAwB;AACpB,6BAAQ,GAAR,CAAY,MAAZ;AACA,yBAAI,OAAO,KAAK,KAAL,CAAW,IAAI,QAAf,CAAX;AACA,yBAAI,KAAK,KAAL,KAAe,IAAf,IAAuB,KAAK,KAAL,KAAe,KAA1C,EAAiD;AAC7C,8BAAK,WAAL,CAAiB,KAAK,IAAL,CAAU,GAA3B;AACA,6BAAI,SAAJ,EAAe;AACX,0CAAa,SAAb;AACA,yCAAY,SAAZ;AACH;AACJ;AAEJ;AACJ,cAbY,CAaX,IAbW,OAAb;;AAeA;AACA,iBAAI,WAAW,IAAI,QAAJ,EAAf;AACA,sBAAS,MAAT,CAAgB,OAAhB,EAAyB,YAAM,aAAN,CAAoB,eAAS,SAA7B,CAAzB;AACA,sBAAS,MAAT,CAAgB,MAAhB,EAAwB,eAAK,iBAA7B;AACA,iBAAI,IAAJ,CAAS,QAAT;AAEH,UA3JkB;;AAAA,eAgKnB,WAhKmB,GAgKL,UAAC,MAAD,EAAY;AACtB,eAAE,IAAF,CAAO;AACH,uBAAM,MADH;AAEH,0BAAS,GAFN;AAGH,sBAAK,UAAI,SAHN;AAIH,uBAAM;AACF,yBAAI,eAAK,OADP;AAEF,8BAAS,eAAK,KAFZ;AAGF,8BAAS,MAAK,KAAL,CAAW,IAHlB;AAIF,0BAAK;AAJH,kBAJH;AAUH,0BAAS,UAAU,IAAV,EAAgB;AACrB,yBAAI,KAAK,KAAL,KAAe,IAAf,IAAuB,KAAK,KAAL,KAAe,KAA1C,EAAiD;AAC7C;AACA,qCAAM,aAAN,CAAoB,kBAAY,KAAhC,EAAuC,IAAvC;AACA;AACA,wCAAK,YAAL,GAAoB,OAAO,KAAK,IAAL,CAAU,IAAV,CAAe,EAAtB,CAApB;AACA;AACA,8BAAK,QAAL,CAAc,EAAC,oBAAoB,CAArB,EAAd;AACA,oCAAW,YAAY;AACnB,kCAAK,cAAL;AACH,0BAFU,CAET,IAFS,CAEJ,IAFI,CAAX,EAEc,IAFd;AAGH,sBAVD,MAUO;AACH,8BAAK,QAAL,CAAc,EAAC,oBAAoB,CAArB,EAAd;AACH;AAEJ,kBAfQ,CAeP,IAfO,OAVN;AA0BH,wBAAO,UAAU,GAAV,EAAe,IAAf,EAAqB;AACxB,0BAAK,QAAL,CAAc,EAAC,oBAAoB,CAArB,EAAd;AACH,kBAFM,CAEL,IAFK;AA1BJ,cAAP;AA8BH,UA/LkB;;AAAA,eAqMnB,iBArMmB,GAqMC,UAAC,KAAD,EAAW;AAC3B,mBAAK,QAAL,CAAc,EAAC,MAAM,MAAM,MAAN,CAAa,KAApB,EAAd;AACH,UAvMkB;;AAAA,eA4MnB,kBA5MmB,GA4ME,YAAM;AACvB,iBAAI,MAAK,KAAL,CAAW,kBAAX,KAAkC,CAAtC,EAAyC;AACrC,uBAAK,mBAAL;AACH,cAFD,MAEO;AACH,uBAAK,QAAL,CAAc,EAAC,oBAAoB,CAAC,CAAtB,EAAd;AACH;AACJ,UAlNkB;;AAAA,eAuNnB,mBAvNmB,GAuNG,YAAM;AACxB,mBAAK,QAAL,CAAc,EAAC,oBAAoB,CAAC,CAAtB,EAAd;AACA;AACA,mBAAK,KAAL,CAAW,iBAAX,CAA6B,CAA7B;AACH,UA3NkB;;AAAA,eAgOnB,cAhOmB,GAgOF,UAAC,KAAD,EAAW;AACxB,iBAAI,KAAJ,EAAW,MAAM,cAAN;AACX,oBAAO,QAAP,CAAgB,IAAhB,GAAuB,YAAM,YAAN,KAAuB,cAAvB,GAAwC,qBAAe,OAAvD,GAAiE,GAAjE,GAAuE,eAAK,YAAnG;AAEH,UApOkB;;AAGf,eAAK,KAAL,GAAa;AACT,mBAAM,MAAK,KAAL,CAAW,IADR;AAET,iCAAoB,CAAC;AAFZ,UAAb;AAHe;AAOlB;;;;6CAEmB;AAChB;AACA,kBAAK,IAAL,CAAU,GAAV,CAAc,KAAd;AACA,wBAAW,YAAY;AACnB,sBAAK,KAAL;AACH,cAFU,CAET,IAFS,CAEJ,KAAK,IAAL,CAAU,GAFN,CAAX,EAEuB,GAFvB;AAGH;;;kCAEQ;;AAEL;;;;AAIA,iBAAI,aAAa,IAAjB;AACA,iBAAI,KAAK,KAAL,CAAW,kBAAX,GAAgC,CAAC,CAArC,EAAwC;AACpC,qBAAI,cAAc;AACd,8BAAS,OADK;AAEd,2BAAM,cAAc,KAAK,KAAL,CAAW,kBAAzB;AAFQ,kBAAlB;;AAKA,yBAAQ,KAAK,KAAL,CAAW,kBAAnB;AACI,0BAAK,CAAL;AACA,0BAAK,CAAL;AACA,0BAAK,CAAL;AACI,qCAAY,OAAZ,GAAsB,MAAtB;AACA,qCAAY,KAAZ,GAAoB,IAApB;AACA,qCAAY,YAAZ,GAA2B,KAAK,kBAAhC;AACA;AACJ,0BAAK,CAAL;AACI,qCAAY,OAAZ,GAAsB,MAAtB;AACA,qCAAY,KAAZ,GAAoB,IAApB;AACA,qCAAY,YAAZ,GAA2B,KAAK,kBAAhC;AACA,qCAAY,OAAZ,GAAsB,MAAtB;AACA,qCAAY,KAAZ,GAAoB,IAApB;AACA,qCAAY,cAAZ,GAA6B,KAAK,mBAAlC;AACA;AACJ,0BAAK,CAAL;AACI,qCAAY,OAAZ,GAAsB,MAAtB;AACA,qCAAY,KAAZ,GAAoB,IAApB;AACA,qCAAY,YAAZ,GAA2B,KAAK,cAAhC;AACA;AApBR;;AAuBA,8BAAa,yCAAe,WAAf,CAAb;AACH;;AAED;AACA,iBAAI,iBAAiB,MAArB;AACA,iBAAI,KAAK,KAAL,CAAW,IAAf,EAAqB,iBAAiB,WAAjB;;AAErB;AACA;AACA,iBAAI,WAAW,EAAC,SAAS,MAAV,EAAf;AACA,iBAAI,KAAK,KAAL,CAAW,UAAX,KAA0B,CAA9B,EAAiC,WAAW,EAAC,SAAS,OAAV,EAAX;;AAEjC,oBACI;AAAA;AAAA,mBAAK,WAAU,aAAf,EAA6B,OAAO,QAApC;AACI;AAAA;AAAA,uBAAK,KAAI,KAAT;AACI;AAAA;AAAA,2BAAK,WAAU,QAAf;AACI;AAAA;AAAA,+BAAQ,WAAU,MAAlB,EAAyB,SAAS,KAAK,YAAvC;AAAA;AAAA,0BADJ;AAEI;AAAA;AAAA;AAAK,4CAAK;AAAV,0BAFJ;AAGI;AAAA;AAAA,+BAAQ,WAAW,cAAnB,EAAmC,SAAS,KAAK,WAAjD;AAAA;AAAA;AAHJ,sBADJ;AAMI,uDAAU,KAAI,KAAd,EAAoB,WAAU,UAA9B,EAAyC,aAAY,iBAArD,EAAuE,eAAvE;AACU,gCAAO,YAAM,YAAN,CAAmB,KAAK,KAAL,CAAW,IAA9B,EAAoC,IAApC,CADjB;AAEU,mCAAU,KAAK,iBAFzB,GANJ;AAUI,kDAAK,WAAU,MAAf,EAAsB,KAAK,KAAK,KAAL,CAAW,SAAtC;AAVJ,kBADJ;AAaK;AAbL,cADJ;AAiBH;;AAED;;;;;AAeA;;;;;AAuBA;;;;;AAmCA;;;;;AAoCA;;;;;;AAQA;;;;;AAWA;;;;;AASA;;;;;;;GArOqC,MAAM,S;;AAA1B,Y,CACV,S,GAAY;AACf,wBAAmB,MAAM,SAAN,CAAgB,IAAhB,CAAqB,UADzB,EACqC;AACpD,iBAAY,MAAM,SAAN,CAAgB,MAAhB,CAAuB,UAFpB,EAEgC;AAC/C,gBAAW,MAAM,SAAN,CAAgB,MAHZ,EAGoB;AACnC,WAAM,MAAM,SAAN,CAAgB,MAJP,CAIc;AAJd,E;mBADF,W;;;;;;;;;;ACpBrB,0C;;;;;;;;;;;;;;;;;;ACAA;;AACA;;KAAY,K;;;;;;;;;;AAEZ;;;KAGqB,S;;;;;;;;;;;6CAuBG;AAChB;AACA,iBAAI,KAAK,KAAL,CAAW,OAAX,KAAuB,OAA3B,EAAoC;AAChC,mBAAE,KAAK,IAAL,CAAU,UAAZ,EAAwB,GAAxB,CAA4B,EAAC,WAAW,8BAAZ,EAA4C,iBAAiB,OAA7D,EAA5B;AACA,mBAAE,KAAK,IAAL,CAAU,UAAZ,EAAwB,OAAxB,CACI;AACI,gCAAW;AADf,kBADJ,EAII,GAJJ,EAKI,SALJ;AAOH;;AAED;AACA,iBAAI,KAAK,KAAL,CAAW,OAAX,KAAuB,MAA3B,EAAmC;AAC/B,mBAAE,KAAK,IAAL,CAAU,UAAZ,EAAwB,GAAxB,CAA4B,EAAC,SAAS,GAAV,EAA5B;AACA,mBAAE,KAAK,IAAL,CAAU,UAAZ,EAAwB,OAAxB,CACI;AACI,8BAAS;AADb,kBADJ,EAII,GAJJ,EAKI,SALJ;AAOH;;AAED;AACA,iBAAI,KAAK,KAAL,CAAW,aAAX,IAA4B,KAAK,KAAL,CAAW,YAA3C,EAAyD;AACrD,4BAAW,KAAK,KAAL,CAAW,YAAtB,EAAoC,KAAK,KAAL,CAAW,aAA/C;AACH;AACJ;;;kCAEQ;AACL;AACA,iBAAI,WAAW,IAAf;AACA,iBAAI,KAAK,KAAL,CAAW,KAAf,EAAsB;AAClB,4BAAW;AAAA;AAAA,uBAAQ,WAAW,UAAU,KAAK,KAAL,CAAW,OAAxC;AACQ,kCAAS,KAAK,KAAL,CAAW,YAD5B;AAC2C,0BAAK,KAAL,CAAW;AADtD,kBAAX;AAEH;AACD;AACA,iBAAI,WAAW,IAAf;AACA,iBAAI,KAAK,KAAL,CAAW,KAAf,EAAsB;AAClB,4BAAW;AAAA;AAAA,uBAAQ,WAAW,UAAU,KAAK,KAAL,CAAW,OAAxC;AACQ,kCAAS,KAAK,KAAL,CAAW,cAD5B;AAC6C,0BAAK,KAAL,CAAW;AADxD,kBAAX;AAEH;;AAED;AACA,iBAAI,wBAAwB,IAA5B;AACA,iBAAI,sBAAsB,KAAK,KAAL,CAAW,YAArC;AACA,iBAAI,KAAK,KAAL,CAAW,WAAf,EAA4B;AACxB,yCAAwB,KAAK,KAAL,CAAW,YAAnC;AACA,uCAAsB,IAAtB;AACH;;AAED,oBACI;AAAA;AAAA,mBAAK,WAAU,WAAf,EAA2B,SAAS,qBAApC;AACI,8CAAK,WAAW,KAAK,KAAL,CAAW,MAA3B,EAAmC,SAAS,mBAA5C,GADJ;AAEI;AAAA;AAAA,uBAAK,KAAI,YAAT,EAAsB,WAAW,KAAK,KAAL,CAAW,MAA5C;AACI;AAAA;AAAA,2BAAK,WAAW,KAAK,KAAL,CAAW,OAA3B;AAAqC,8BAAK,KAAL,CAAW;AAAhD,sBADJ;AAEK,6BAFL;AAGK;AAHL;AAFJ,cADJ;AAUH;;;;GAtFkC,MAAM,S;;AAAxB,U,CACV,Y,GAAe;AAClB,aAAQ,UADU,EACC;AACnB,aAAQ,UAFU,EAEC;AACnB,cAAS,OAHS,CAGF;AAHE,E;AADL,U,CAOV,S,GAAY;AACf,WAAM,MAAM,SAAN,CAAgB,MAAhB,CAAuB,UADd,EAC0B;AACzC,aAAQ,MAAM,SAAN,CAAgB,MAFT,EAEiB;AAChC,cAAS,MAAM,SAAN,CAAgB,MAHV,EAGkB;AACjC,cAAS,MAAM,SAAN,CAAgB,MAJV,EAIiB;AAChC,cAAS,MAAM,SAAN,CAAgB,MALV,EAKkB;AACjC,YAAO,MAAM,SAAN,CAAgB,MANR,EAMgB;AAC/B,cAAS,MAAM,SAAN,CAAgB,MAPV,EAOkB;AACjC,YAAO,MAAM,SAAN,CAAgB,MARR,EAQgB;AAC/B,mBAAc,MAAM,SAAN,CAAgB,IATf,EASqB;AACpC,qBAAgB,MAAM,SAAN,CAAgB,IAVjB,EAUuB;AACtC,kBAAa,MAAM,SAAN,CAAgB,IAXd,EAWoB;AACnC,oBAAe,MAAM,SAAN,CAAgB,MAZhB,EAYuB;AACtC,aAAQ,MAAM,SAAN,CAAgB,MAbT,CAagB;AAbhB,E;mBAPF,S;;;;;;;;;;ACNrB,0C","file":"edit.js","sourcesContent":["import 'babel-polyfill';\nimport './common.css';\nimport './edit.css';\nimport Data, {DataEdit, Utils, API} from './data';\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport EditImage from './components/edit-image/edit-image';\nimport EditTxtSend from './components/edit-txt-send/edit-txt-send';\nimport DialogBox from './components/dialog-box/dialog-box';\n\n/**\n * 编辑页面\n */\nclass Edit extends React.Component {\n    constructor(props) {\n        super(props);\n\n        //请求浏览器存储数据\n        Utils.getInitDataCookie();\n\n        //请求浏览器存储数据,主要是url传参或者跳到第三方页面前保存的数据,跳回来后需要恢复跳前页面状态。\n        Utils.getInitDataStorage();\n\n        //话题标题\n        document.title = Data.topicTitle;\n\n        /**\n         * editStatus: number 编辑状态 0 编辑图片 1编辑文字\n         * cookiePrompt:Boolean 是否显示设置cookie的提示,如果是登录页跳转回来后,依然没有获得uid,则就是cookie设置问题\n         */\n        this.state = {\n            editStatus: DataEdit.editStatus,\n            cookiePrompt: Boolean((DataEdit.editStatus == 1) && !Data.bfuid)\n        };\n    }\n\n    componentDidMount() {\n        //请求服务器的初始数据\n        this.userGet(Data.bfuid);\n    }\n\n    render() {\n\n        //设置cookie的提示\n        let cookiePromptComp = null;\n        if (this.state.cookiePrompt) {\n            let dialogProps = {\n                animate: 'scale',\n                txtc: '获取登录信息失败,请点击设置-Safari-阻止Cookie,修改为始终允许,然后再登录一次。',\n                styleb1: 'btn1',\n                txtb1: '关闭',\n                closeHandler: this.closeDialogHandler\n            };\n            cookiePromptComp = <DialogBox {...dialogProps}/>;\n        }\n\n        return (\n            <div className='edit pwh'>\n                <EditImage editStatus={this.state.editStatus} editStatusHandler={this.editStatusHandler}/>\n                <EditTxtSend editStatus={this.state.editStatus}\n                             canvasImg={DataEdit.canvasImg}\n                             text={DataEdit.text}\n                             editStatusHandler={this.editStatusHandler}/>\n                {cookiePromptComp}\n            </div>\n        );\n    }\n\n    /**\n     * 改变编辑状态\n     * @param id 状态id\n     * @param img 编辑完的图片\n     */\n    editStatusHandler = (id, img) => {\n        if (img) DataEdit.canvasImg = img;\n        this.setState({editStatus: id});\n    }\n\n    /**\n     * 关闭对话框\n     */\n    closeDialogHandler = () => {\n        this.setState({cookiePrompt: false});\n    }\n\n    userGet = (id) => {\n        if (id) {\n            $.ajax({\n                type: 'GET',\n                url: API.sportsGetUser + id,\n                //data: id,\n                dataType: 'json',\n                timeout: 500,\n                success: function (data) {\n                    var s = data.token + ':' + id;\n                    Data.base64TokenUserId = Utils.b64btoa(s);\n                    Data.userToken = Utils.b64btoa(data.token);\n                    this.userLogin();\n                }.bind(this),\n                error: function (xhr, type) {\n                    console.log(API.sportsGetUser + id);\n                }.bind(this)\n            });\n\n        }\n    }\n\n    userLogin = () => {\n        $.ajax({\n            type: 'POST',\n            timeout: 500,\n            url: API.sportsLogin,\n            data: {\n                id: Data.bfuid,\n                nickname: Utils.b64btoa(Data.bfuname),\n                token: Data.userToken\n            },\n            error: function (xhr, type) {\n                console.log(API.sportsLogin);\n            }.bind(this)\n        });\n\n    }\n}\n\nReactDOM.render(<Edit />, document.getElementById('mountNode'));\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/edit.js\n **/","// removed by extract-text-webpack-plugin\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/edit.css\n ** module id = 304\n ** module chunks = 0\n **/","import './slick.css';\r\nimport './style.css';\r\nimport Data, {DataEdit, Utils, STORAGE_KEY} from '../../data';\r\nimport fabric from 'fabric';\r\nimport lrz from 'lrz';\r\nimport * as React from 'react';\r\nimport EditImageTopBar from './edit-image-top-bar';\r\nimport EditImageMain from './edit-image-main';\r\nimport EditImageBar from './edit-image-bar';\r\n\r\n/**\r\n * 画布图片物体初始化配置\r\n * @type {{borderColor: string, cornerColor: string, cornerSize: number, rotatingPointOffset: number, lockUniScaling: boolean}}\r\n */\r\nconst canvasImgInitOptions = {\r\n    cornerSize: 50,\r\n    transparentCorners: false,\r\n    padding: 10,\r\n    borderColor: 'rgba(33,118,255,1.0)',\r\n    cornerColor: 'rgba(255,255,255,1.0)',\r\n    cornerStrokeColor: 'rgba(33,118,255,1.0)',\r\n    cornerStyle: 'circle',\r\n    borderOpacityWhenMoving: 0.6,\r\n    borderScaleFactor: 0.2,\r\n    rotatingPointOffset: 56,\r\n    lockUniScaling: true\r\n};\r\n\r\n/**\r\n * 编辑国旗组件\r\n */\r\nexport default class EditImage extends React.Component {\r\n    static propTypes = {\r\n        editStatusHandler: React.PropTypes.func.isRequired, //改变编辑状态\r\n        editStatus: React.PropTypes.number.isRequired //编辑状态\r\n    }\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            selectedFlagIndex: 0,\r\n            bgImg: Utils.storageGetObj(STORAGE_KEY.uploadImg)\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.initCanvas();\r\n    }\r\n\r\n    render() {\r\n        //默认不显示\r\n        //如果组件索引和当前状态索引一致,则显示\r\n        let styleObj = {display: 'none'};\r\n        if (this.props.editStatus === 0) styleObj = {display: 'block'};\r\n\r\n        return (\r\n            <div className='editImage' style={styleObj}>\r\n                <EditImageTopBar title={Data.topicTitle}\r\n                                 goIndexHandler={this.goIndexHandler}\r\n                                 uploadHandler={this.uploadHandler}/>\r\n                <EditImageMain bg={this.state.bgImg}\r\n                               data={DataEdit.maskImages}/>\r\n                <EditImageBar index={this.state.selectedFlagIndex}\r\n                              data={DataEdit.flagThumbnailImages}\r\n                              selectedHandler={this.selectedHandler}/>\r\n                <button className='nextBtn' onClick={this.nextHandler}>下一步</button>\r\n                <div className='tips'>小提示，脸上的国旗是可以扭动的哦</div>\r\n            </div>\r\n\r\n        );\r\n    }\r\n\r\n    /**\r\n     * 上传图片\r\n     * @param evnet\r\n     */\r\n    uploadHandler = (evnet) => {\r\n        evnet.preventDefault();\r\n\r\n        lrz(document.querySelector('.uploadInput').files[0], {width: 750})\r\n            .then(function (rst) {\r\n                this.setState({bgImg: rst.base64});\r\n                return rst;\r\n            }.bind(this))\r\n            .catch(function (err) {\r\n                // 万一出错了，这里可以捕捉到错误信息 而且以上的then都不会执行\r\n            })\r\n            .always(function () {\r\n                // 不管是成功失败，这里都会执行\r\n            });\r\n    }\r\n\r\n    /**\r\n     * 去首页\r\n     * @param evnet\r\n     */\r\n    goIndexHandler = (evnet) => {\r\n        evnet.preventDefault();\r\n        window.location.href = Utils.getUrlPrefix() + '/index.html' + window.location.search;\r\n    }\r\n\r\n    /**\r\n     * 选中国旗缩略图事件\r\n     * @param evnet\r\n     */\r\n    selectedHandler = (evnet) => {\r\n        evnet.preventDefault();\r\n        //取得选中元素的索引值,如果与之前选中的索引不一样,则存下来,并且替换画布国旗为选中的国旗\r\n        let index = Number(evnet.currentTarget.getAttribute('data-index'));\r\n        if (index !== this.state.selectedFlagIndex) {\r\n            this.setState({selectedFlagIndex: index});\r\n            this.replaceCanvasImg(index);\r\n        }\r\n    }\r\n\r\n    nextHandler = (evnet) => {\r\n        //下一步，合成图片后编辑文字内容\r\n        evnet.preventDefault();\r\n\r\n        //去掉选中状态,不然线框控制块也会渲染成图\r\n        this.editCanvas.deactivateAll();\r\n\r\n        //把背景图和遮罩图合并进来\r\n        let bgObj = new fabric.Image(document.querySelector('.editImageMain .bgImg'));\r\n        //this.editCanvas.insertAt(bgObj, 0);\r\n        this.editCanvas.setBackgroundImage(bgObj);\r\n        let maskImage = document.querySelector('.maskImage .slick-active img');\r\n        let maskObj = null;\r\n        if (maskImage) {\r\n            maskObj = new fabric.Image(maskImage);\r\n            //this.editCanvas.add(maskObj);\r\n            this.editCanvas.setOverlayImage(maskObj);\r\n        }\r\n        this.editCanvas.backgroundColor = 'rgba(255,255,255,1.0)';\r\n\r\n        //把画布转换为data:image/png;base64,\r\n        var dataURL = this.editCanvas.toDataURL({format: 'jpeg', width: 750, height: 750, quality: 0.8, multiplier: 1});\r\n\r\n        //保存图片数据\r\n        // Utils.storageSetObj(STORAGE_KEY.canvasImg, dataURL);\r\n\r\n        //window.open(dataURL);\r\n\r\n        //改变编辑状态为1,即前往编辑文字\r\n        this.props.editStatusHandler(1, dataURL);\r\n\r\n        this.editCanvas.remove(bgObj);\r\n        this.editCanvas.remove(maskObj);\r\n        this.editCanvas.backgroundColor = '';\r\n    }\r\n\r\n    /**\r\n     * 初始化画布相关\r\n     */\r\n    initCanvas = () => {\r\n        //画布初始化\r\n        this.editCanvas = new fabric.Canvas(\r\n            'editCanvas',\r\n            {width: 750, height: 750, selection: false, allowTouchScrolling: true, controlsAboveOverlay: true}\r\n        );\r\n\r\n        //画布物体移动,防止出边界的处理\r\n        let goodtop, goodleft;\r\n        this.editCanvas.on('object:moving', (o)=> {\r\n            let obj = o.target;\r\n            obj.setCoords();\r\n            if (obj.isContainedWithinRect(new fabric.Point(0, 0), new fabric.Point(750, 750))) {\r\n                goodtop = obj.top;\r\n                goodleft = obj.left;\r\n            } else {\r\n                obj.setTop(goodtop);\r\n                obj.setLeft(goodleft);\r\n            }\r\n        });\r\n\r\n        //选中画布物体,则禁用触摸滚动事件\r\n        this.editCanvas.on('object:selected', (o)=> {\r\n            this.editCanvas.allowTouchScrolling = false;\r\n        });\r\n        //取消选中画布物体,则启用触摸滚动事件\r\n        this.editCanvas.on('selection:cleared', (o)=> {\r\n            this.editCanvas.allowTouchScrolling = true;\r\n        });\r\n\r\n        //初始化画布物体,默认用第一个图\r\n        let imgUrl1 = DataEdit.flagThumbnailImages[0].img + 'left.png';\r\n        let imgUrl2 = DataEdit.flagThumbnailImages[0].img + 'right.png';\r\n        this.creatCanvasImg(imgUrl1, {left: 200, top: 400}, 0);\r\n        this.creatCanvasImg(imgUrl2, {left: 400, top: 400}, 1);\r\n    }\r\n\r\n    /**\r\n     * 创建画布图片物体\r\n     * @param url\r\n     * @param options\r\n     * @param index\r\n     */\r\n    creatCanvasImg = (url, options, index) => {\r\n        fabric.Image.fromURL(url, (oImg) => {\r\n            oImg.set(Object.assign({}, canvasImgInitOptions, options));\r\n            this.editCanvas.insertAt(oImg, index);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 替换画布图片物体\r\n     */\r\n    replaceCanvasImg = (index) => {\r\n        /**\r\n         * 获得原图相关属性,用来赋值给替换后的新图\r\n         * @param obj\r\n         * @returns {{}}\r\n         */\r\n        function getOptions(obj) {\r\n            let options = {};\r\n            options.left = obj.getLeft();\r\n            options.top = obj.getTop();\r\n            options.angle = obj.getAngle();\r\n            options.scaleX = obj.getScaleX();\r\n            options.scaleY = obj.getScaleY();\r\n            options.flipX = obj.getFlipX();\r\n            options.flipY = obj.getFlipY();\r\n            return options;\r\n        }\r\n\r\n        let item0Options = getOptions(this.editCanvas.item(0));\r\n        let item1Options = getOptions(this.editCanvas.item(1));\r\n        this.editCanvas.clear();\r\n        let imgUrl1 = DataEdit.flagThumbnailImages[index].img + 'left.png';\r\n        let imgUrl2 = DataEdit.flagThumbnailImages[index].img + 'right.png';\r\n        this.creatCanvasImg(imgUrl1, item0Options, 0);\r\n        this.creatCanvasImg(imgUrl2, item1Options, 1);\r\n    }\r\n\r\n}\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/edit-image/edit-image.js\n **/","// removed by extract-text-webpack-plugin\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/components/edit-image/slick.css\n ** module id = 310\n ** module chunks = 0\n **/","// removed by extract-text-webpack-plugin\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/components/edit-image/style.css\n ** module id = 312\n ** module chunks = 0\n **/","module.exports = fabric;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"fabric\"\n ** module id = 314\n ** module chunks = 0\n **/","import './style.css';\nimport * as React from 'react';\n\n/**\n * 编辑页面顶部横栏\n */\nexport default class EditImageTopBar extends React.Component {\n    static propTypes = {\n        title: React.PropTypes.string.isRequired,\n        goIndexHandler: React.PropTypes.func.isRequired,\n        uploadHandler: React.PropTypes.func.isRequired\n    }\n\n    render() {\n        return (\n            <div className='topBar'>\n                <button className='btn1' onClick={this.props.goIndexHandler}>取消</button>\n                <h1 >{this.props.title}</h1>\n                <div className='btn2'>重拍\n                    <input className='uploadInput' type='file' capture='camera' accept='image/*' id='file'\n                           onChange={this.props.uploadHandler}/>\n                </div>\n            </div>\n        );\n    }\n\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/edit-image/edit-image-top-bar.js\n **/","import * as React from 'react';\r\nimport Slider from 'react-slick';\r\n\r\n/**\r\n * 编辑图片区域\r\n */\r\nexport default class EditImageMain extends React.Component {\r\n    static propTypes = {\r\n        bg: React.PropTypes.string.isRequired,\r\n        data: React.PropTypes.array.isRequired\r\n\r\n    }\r\n\r\n    render() {\r\n        //组件配置\r\n        var settings = {\r\n            infinite: true,\r\n            slidesToShow: 1,\r\n            slidesToScroll: 1,\r\n            draggable: false\r\n        };\r\n\r\n        let list = this.props.data.map(function (item) {\r\n            return <div><img src={item}/></div>;\r\n        });\r\n\r\n        //按需求,第一个无图\r\n        list.unshift(<div></div>);\r\n\r\n        return (\r\n            <div className='editImageMain'>\r\n                <img className='bgImg' src={this.props.bg}/>\r\n                <canvas id='editCanvas'></canvas>\r\n                <Slider className='maskImage' {...settings}>\r\n                    {list}\r\n                </Slider>\r\n            </div>\r\n\r\n        );\r\n    }\r\n\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/edit-image/edit-image-main.js\n **/","module.exports = Slider;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"Slider\"\n ** module id = 318\n ** module chunks = 0\n **/","import * as React from 'react';\r\nimport Slider from 'react-slick';\r\n\r\n/**\r\n * 编辑国旗栏\r\n */\r\nexport default class EditImageBar extends React.Component {\r\n    static propTypes = {\r\n        data: React.PropTypes.array.isRequired,\r\n        index: React.PropTypes.number.isRequired,\r\n        selectedHandler: React.PropTypes.func.isRequired\r\n    }\r\n\r\n    render() {\r\n        //组件配置\r\n        var settings = {\r\n            infinite: false,\r\n            slidesToShow: 5,\r\n            slidesToScroll: 5,\r\n            arrows: false\r\n        };\r\n\r\n        let list = this.props.data.map((item, index) => {\r\n            //给当前选中的国旗小图添加选中样式\r\n            let selected = '';\r\n            if (index === this.props.index) selected = 'slick-selected'\r\n            return <div className={selected} onClick={this.props.selectedHandler}>\r\n                <img src={item.img + '.png'}/>\r\n                <div>{item.title}</div>\r\n            </div>;\r\n        });\r\n\r\n        return (\r\n            <div className='editImageBar'>\r\n                <Slider {...settings}>\r\n                    {list}\r\n                </Slider>\r\n            </div>\r\n        );\r\n    }\r\n\r\n}\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/edit-image/edit-image-bar.js\n **/","import './style.css';\nimport Data, {DataEdit, CONFIG, URL_PARAM_NAME, STORAGE_KEY, Utils, API} from '../../data';\nimport * as React from 'react';\nimport DialogBox from '../dialog-box/dialog-box';\n\n/**\n * 弹出框内容\n */\nconst DialogContent = [\n    '发送中...',\n    '发送成功',\n    '发送失败',\n    '请输入内容',\n    '确定退出?',\n    '发送成功,前往首页'\n];\n\n/**\n * 编辑文字发送组件\n */\nexport default class EditTxtSend extends React.Component {\n    static propTypes = {\n        editStatusHandler: React.PropTypes.func.isRequired, //改变编辑状态\n        editStatus: React.PropTypes.number.isRequired, //编辑状态\n        canvasImg: React.PropTypes.string, //编辑完成的图片\n        text: React.PropTypes.string //编辑好的文字\n    }\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            text: this.props.text,\n            dialogContentIndex: -1\n        };\n    }\n\n    componentDidMount() {\n        //延时才能聚焦成功\n        this.refs.txt.focus();\n        setTimeout(function () {\n            this.focus();\n        }.bind(this.refs.txt), 100);\n    }\n\n    render() {\n\n        /*\n         * 对话框,如果对话框内容索引大于-1,则弹出对话框\n         * 内部逻辑看DialogContent常量内容\n         */\n        let dialogComp = null;\n        if (this.state.dialogContentIndex > -1) {\n            let dialogProps = {\n                animate: 'scale',\n                txtc: DialogContent[this.state.dialogContentIndex]\n            };\n\n            switch (this.state.dialogContentIndex) {\n                case 1:\n                case 2:\n                case 3:\n                    dialogProps.styleb1 = 'btn1';\n                    dialogProps.txtb1 = '关闭';\n                    dialogProps.closeHandler = this.closeDialogHandler;\n                    break;\n                case 4:\n                    dialogProps.styleb1 = 'btn2';\n                    dialogProps.txtb1 = '取消';\n                    dialogProps.closeHandler = this.closeDialogHandler;\n                    dialogProps.styleb2 = 'btn3';\n                    dialogProps.txtb2 = '确认';\n                    dialogProps.confirmHandler = this.confirmCloseHandler;\n                    break;\n                case 5:\n                    dialogProps.styleb1 = 'btn1';\n                    dialogProps.txtb1 = '确认';\n                    dialogProps.closeHandler = this.goIndexHandler;\n                    break;\n            }\n\n            dialogComp = <DialogBox {...dialogProps}/>;\n        }\n\n        //没有输入内容时发送按钮的样式\n        var noContentStyle = 'btn2';\n        if (this.state.text) noContentStyle = 'btn2 btn3';\n\n        //默认不显示\n        //如果组件索引和当前状态索引一致,则显示\n        let styleObj = {display: 'none'};\n        if (this.props.editStatus === 1) styleObj = {display: 'block'};\n\n        return (\n            <div className='editTxtSend' style={styleObj}>\n                <div ref='box'>\n                    <div className='topBar'>\n                        <button className='btn1' onClick={this.closeHandler}>取消</button>\n                        <h1>{Data.topicTitle}</h1>\n                        <button className={noContentStyle} onClick={this.sendHandler}>发送</button>\n                    </div>\n                    <textarea ref='txt' className='textarea' placeholder='请输入回复内容,限制1000字' autofocus\n                              value={Utils.cutStrForNum(this.state.text, 1000)}\n                              onChange={this.textChangeHandler}>\n                    </textarea>\n                    <img className='img1' src={this.props.canvasImg}/>\n                </div>\n                {dialogComp}\n            </div>\n        );\n    }\n\n    /**\n     * 取消按钮点击事件,关闭编辑文字组件\n     */\n    closeHandler = () => {\n        /*\n         * 如果有输入文字,则弹出确认关闭的对话框\n         * 否则直接关闭编辑文字组件\n         */\n        if (this.state.text) {\n            this.setState({dialogContentIndex: 4});\n        } else {\n            this.confirmCloseHandler();\n        }\n    }\n\n    /**\n     * 发送按钮点击事件\n     */\n    sendHandler = () => {\n        //如果已登录,直接发送数据\n        //否则跳转登录页\n        if (Data.base64TokenUserId) {\n            this.setState({dialogContentIndex: 0});\n            this.sendImgData();\n        } else {\n            if (this.state.text) {\n                DataEdit.text = Utils.cutStrForNum(this.state.text, 1000);\n            }\n\n            //保存数据,跳回来恢复页面用\n            Utils.setInitDataStorage();\n            //var loginUrl = 'http://sso.baofeng.net/api/mlogin/default?from=sports_h5&version=1&did=&btncolor=blue&next_action=' + sportsH5Url + '&selfjumpurl=' + sportsH5Url;\n            let url = encodeURIComponent(window.location.href);\n            window.location.href = CONFIG.loginUrl + url + '&selfjumpurl=' + url;\n        }\n\n    }\n\n    /**\n     * 发送图片数据\n     */\n    sendImgData = () => {\n        //错误处理\n        let timeoutID = setTimeout(function () {\n            if (timeoutID && this) this.setState({dialogContentIndex: 2});\n        }.bind(this), 800);\n\n        let xhr = new XMLHttpRequest();\n        xhr.timeout = 800;\n        xhr.open('POST', API.uploadImage);\n        xhr.onload = function (e) {\n            if (xhr.status === 200) {\n                console.log('上传成功');\n                let data = JSON.parse(xhr.response);\n                if (data.errno === null || data.errno === 10000) {\n                    this.sendAllData(data.data.pid);\n                    if (timeoutID) {\n                        clearTimeout(timeoutID);\n                        timeoutID = undefined;\n                    }\n                }\n\n            }\n        }.bind(this);\n\n        // 发送数据\n        let formData = new FormData();\n        formData.append('image', Utils.dataURItoBlob(DataEdit.canvasImg));\n        formData.append('user', Data.base64TokenUserId);\n        xhr.send(formData);\n\n    }\n\n    /**\n     * 发送图文数据\n     */\n    sendAllData = (imgpid) => {\n        $.ajax({\n            type: 'POST',\n            timeout: 500,\n            url: API.topicPost,\n            data: {\n                id: Data.topicId,\n                user_id: Data.bfuid,\n                content: this.state.text,\n                pid: imgpid\n            },\n            success: function (data) {\n                if (data.errno === null || data.errno === 10000) {\n                    //跳回首页显示分享提示\n                    Utils.storageSetObj(STORAGE_KEY.share, true);\n                    //置顶当前发送成功的回复\n                    Data.topicReplyId = Number(data.data.post.id);\n                    //提示发送成功并回首页\n                    this.setState({dialogContentIndex: 5});\n                    setTimeout(function () {\n                        this.goIndexHandler();\n                    }.bind(this), 1000);\n                } else {\n                    this.setState({dialogContentIndex: 2});\n                }\n\n            }.bind(this),\n            error: function (xhr, type) {\n                this.setState({dialogContentIndex: 2});\n            }.bind(this)\n        });\n    }\n\n    /**\n     * 保存输入的文字数据\n     * @param event\n     */\n    textChangeHandler = (event) => {\n        this.setState({text: event.target.value});\n    }\n\n    /**\n     * 关闭对话框\n     */\n    closeDialogHandler = () => {\n        if (this.state.dialogContentIndex === 1) {\n            this.confirmCloseHandler();\n        } else {\n            this.setState({dialogContentIndex: -1});\n        }\n    }\n\n    /**\n     * 确认关闭编辑文字组件\n     */\n    confirmCloseHandler = () => {\n        this.setState({dialogContentIndex: -1});\n        //改变编辑状态为0,即回到编辑图片\n        this.props.editStatusHandler(0);\n    }\n\n    /**\n     * 去首页\n     */\n    goIndexHandler = (event) => {\n        if (event) evnet.preventDefault();\n        window.location.href = Utils.getUrlPrefix() + '/index.html?' + URL_PARAM_NAME.replyId + '=' + Data.topicReplyId;\n\n    }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/edit-txt-send/edit-txt-send.js\n **/","// removed by extract-text-webpack-plugin\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/components/edit-txt-send/style.css\n ** module id = 321\n ** module chunks = 0\n **/","import './style.css';\nimport * as React from 'react';\n\n/**\n * 弹出提示组件\n */\nexport default class DialogBox extends React.Component {\n    static defaultProps = {\n        styleo: 'overlay1',//对话框遮罩背景样式\n        stylec: 'content1',//对话框内容box的样式\n        stylect: 'font1'//对话框内容文本的样式\n    }\n\n    static propTypes = {\n        txtc: React.PropTypes.string.isRequired, // 对话框内容\n        stylec: React.PropTypes.string, // 对话框内容box的样式类名\n        stylect: React.PropTypes.string, // 对话框内容文本的样式类名\n        animate: React.PropTypes.string,// 对话框的动画效果\n        styleb1: React.PropTypes.string, // 对话框按钮1样式类名\n        txtb1: React.PropTypes.string, // 对话框按钮1文字\n        styleb2: React.PropTypes.string, // 对话框按钮2样式类名\n        txtb2: React.PropTypes.string, // 对话框按钮2文字\n        closeHandler: React.PropTypes.func, // 对话框关闭回调函数\n        confirmHandler: React.PropTypes.func, // 对话框确认回调函数\n        allHitClose: React.PropTypes.bool, // 是否全部为关闭事件热区\n        autoCloseTime: React.PropTypes.number,//自动关闭对话框时间\n        styleo: React.PropTypes.string // 对话框遮罩背景样式\n    }\n\n    componentDidMount() {\n        //如果组件出现动画效果为放大\n        if (this.props.animate === 'scale') {\n            $(this.refs.contentBox).css({transform: 'scale(0, 0) translateX(-50%)', transformOrigin: '0 50%'});\n            $(this.refs.contentBox).animate(\n                {\n                    transform: 'scale(1, 1) translateX(-50%)'\n                },\n                100,\n                'ease-in'\n            );\n        }\n\n        //淡入\n        if (this.props.animate === 'fade') {\n            $(this.refs.contentBox).css({opacity: 0.0});\n            $(this.refs.contentBox).animate(\n                {\n                    opacity: 1.0\n                },\n                100,\n                'ease-in'\n            );\n        }\n\n        //自动关闭\n        if (this.props.autoCloseTime && this.props.closeHandler) {\n            setTimeout(this.props.closeHandler, this.props.autoCloseTime);\n        }\n    }\n\n    render() {\n        //第一个按钮,通过为关闭,取消,no之类\n        let btn1Comp = null;\n        if (this.props.txtb1) {\n            btn1Comp = <button className={'btn0 ' + this.props.styleb1}\n                               onClick={this.props.closeHandler}>{this.props.txtb1}</button>\n        }\n        //第二个按钮,通常为确定,yes之类\n        let btn2Comp = null;\n        if (this.props.txtb2) {\n            btn2Comp = <button className={'btn0 ' + this.props.styleb2}\n                               onClick={this.props.confirmHandler}>{this.props.txtb2}</button>\n        }\n\n        //全部为关闭事件热区\n        let dialogBoxCloseHandler = null;\n        let overlayCloseHandler = this.props.closeHandler;\n        if (this.props.allHitClose) {\n            dialogBoxCloseHandler = this.props.closeHandler;\n            overlayCloseHandler = null;\n        }\n\n        return (\n            <div className='dialogBox' onClick={dialogBoxCloseHandler}>\n                <div className={this.props.styleo} onClick={overlayCloseHandler}></div>\n                <div ref='contentBox' className={this.props.stylec}>\n                    <div className={this.props.stylect}>{this.props.txtc}</div>\n                    {btn1Comp}\n                    {btn2Comp}\n                </div>\n            </div>\n        );\n    }\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/dialog-box/dialog-box.js\n **/","// removed by extract-text-webpack-plugin\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/components/dialog-box/style.css\n ** module id = 324\n ** module chunks = 0\n **/"],"sourceRoot":""}