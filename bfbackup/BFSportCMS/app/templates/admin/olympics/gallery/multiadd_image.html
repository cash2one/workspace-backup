<!DOCTYPE html><html><head>    <meta charset="utf-8">    <meta http-equiv="X-UA-Compatible" content="IE=edge">    <title>暴风体育内容管理系统 - CMS</title>    <!-- Tell the browser to be responsive to screen width -->    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">    <!-- Bootstrap 3.3.5 -->    <link rel="stylesheet" href="/static/bootstrap/css/bootstrap.min.css">    <!-- jQuery UI -->    <link rel="stylesheet" href="/static/plugins/jQueryUI/jquery-ui.min.css">    <!-- DataTables -->    <link rel="stylesheet" href="/static/plugins/datatables/dataTables.bootstrap.css">    <!-- Font Awesome -->    <link rel="stylesheet" href="/static/bootstrap/css/font-awesome.min.css">    <!-- Ionicons -->    <link rel="stylesheet" href="/static/bootstrap/css/ionicons.min.css">    <!-- Theme style -->    <link rel="stylesheet" href="/static/dist/css/AdminLTE.min.css">    <!-- AdminLTE Skins. Choose a skin from the css/skins         folder instead of downloading all of them to reduce the load. -->    <link rel="stylesheet" href="/static/dist/css/skins/_all-skins.min.css">    <link rel="stylesheet" href="/static/fileupload/css/fileupload.css">    <link rel="stylesheet" href="/static/fileupload/css/fileupload-ui.css">    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->    <!--[if lt IE 9]>    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>    <![endif]-->    <style>        .table tbody tr td {            vertical-align: middle;        }        .del_tip {            text-align: center;            line-height: 34px;        }        .ui-dialog-titlebar-close {            outline: none;        }        .file_img_content_min,        .file_img_content {            max-width: 200px;            height: 70px;            margin: 7px 0 auto 0;        }        .file_img_content img,        .file_img_content_min img {            max-width: 200px;            height: 70px;        }        .input-group {            margin-top: 10px;        }        .upload_img_contain {            padding-right: 85px;            position: relative;            line-height: 34px;        }        .upload_img_contain .button_tip {            position: absolute;            right: 0;            top: 0;            color: #f90;        }    </style></head><body class="hold-transition skin-blue sidebar-mini" style="background: #ecf0f5;"><div class="wrapper">    <div class="content-wrapper" style="margin-left: 0;">        <section class="content-header">            <h1><i class="fa fa-tags"></i>暴风体育CMS</h1>        </section>        <section class="content">            <div class="row">                <div class="col-md-10 col-md-offset-1">                    <div class="box box-info">                        <div class="box-header with-border">                            <div class="col-md-4">                                    <div class="upload_img_contain">                                        <div class="input-group">                                            <span class="input-group-btn">                                                <span class="btn btn-warning fileinput-button">                                                <i class="glyphicon glyphicon-plus"></i>                                                <span>选择多张图片</span>                                                <input id="fileupload" type="file" name="image" multiple                                                   data-url="http://w.image.sports.baofeng.com/save?token=xVFpX0RU"                                                   data-sequential-uploads="true"                                                   data-form-data='{"token": "xVFpX0RU"}'>                                                </span>                                            </span>                                        </div>                                    </div>                                </div>                        </div>                        <!-- /.box-header -->                        <form class="form-horizontal" id="panel" method="post" onSubmit="return check();">                            <input type="hidden" id="total" name="total" value="">                            <input type="hidden" name="gallery_id" value="{{ gallery_id }}">                            <div id="continer">                            </div>                            <div class="box-footer">                                <a id="cancel" class="btn btn-default" href="/olympics/galleryImg/{{ gallery_id }}/list">返回</a>                                <button type="submit" class="btn btn-info pull-right">提交</button>                            </div>                            <!-- /.box-footer -->                        </form>                    </div>                </div>            </div>        </section>    </div></div><div id="tip" title="完善信息提示">    <p class="del_tip"></p></div><!-- jQuery 2.1.4 --><script src="/static/plugins/jQuery/jQuery-2.1.4.min.js"></script><!-- Bootstrap 3.3.5 --><script src="/static/bootstrap/js/bootstrap.min.js"></script><!-- jQuery UI --><script src="/static/plugins/jQueryUI/jquery-ui.min.js"></script><!-- DataTables --><script src="/static/plugins/datatables/jquery.dataTables.min.js"></script><script src="/static/plugins/datatables/dataTables.bootstrap.min.js"></script><script src="/static/fileupload/scripts/jquery.ui.widget.js"></script><script src="/static/fileupload/scripts/jquery.fileupload.js"></script><script>        //显示图片提示    $(function () {        $('[data-toggle="tooltip"]').tooltip()    });    var dialog = $('#tip').dialog({        autoOpen: false,        height: 100,        width: 350,        modal: true    });    function check() {        /*        $(".title").each(function () {            if($(this).val() == ''){                alert("eee");                //dialog.dialog('open');                //$(".del_tip").text("请为所有的图片填写标题。");            }else{                alert("xxx");            }        });        */    }    //上传行为    var total = 0;    var titleN = '';    var briefN = '';    var imgN = '';    var coverN = '';    var imgVal = '';    $('#fileupload').fileupload({        add: function (e, data) {            //data.context = $('<p/>').text('Uploading...').appendTo('#content');            data.submit();        },        done: function (e, data) {            //$('#cover').val(data);            console.log(data.result)            var result = data.result.errno;            if (result !== 10000) {                alert('上传失败,请重试！');            }            else {                //$(".file_img_content").html('<img height="90" src="http://image.sports.baofeng.com/' + data.result.data.pid + '">');                //$('#cover').val(data.result.data.pid);                var html = '';                total++;                imgVal = data.result.data.pid;                titleN = 'title'+total.toString();                briefN = 'brief'+total.toString();                imgN = 'http://image.sports.baofeng.com/'+data.result.data.pid;                coverN = 'cover'+total.toString();                html +='<div class="row">' +                        '<div class="col-md-5">' +                        '<div class="box-body">' +                        '<div class="form-group">' +                        '<label for="slide_title" class="col-sm-4 control-label">标题</label>' +                        '<div class="col-sm-8">' +                        '<input type="text" class="form-control" class="title" name="'+titleN+'" placeholder="输入标题"></div></div>' +                        '<div class="form-group">' +                        '<label for="slide_title" class="col-sm-4 control-label">介绍</label>' +                        '<div class="col-sm-8">' +                        '<input type="text" class="form-control" class="brief" name="'+briefN+'" placeholder="输入介绍"></div></div></div>' +                        '<!-- /.box-body --></div>' +                        '<div class="col-md-4">' +                        '<input type="hidden" name="'+coverN+'" value="'+imgVal+'"/>' +                        '<div class="file_img_content"><img height="90" src="'+imgN+'"></div>' +                        '</div>' +                        '</div>' +                        '<hr/>';                $(html).appendTo($("#continer"));                $('#total').val(total);            }        }    });    //获取参数    function getUrlParam(name) {        var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)"); //构造一个含有目标参数的正则表达式对象        var r = window.location.search.substr(1).match(reg);  //匹配目标参数        if (r != null) {            return unescape(r[2]);        }        else {            return null; //返回参数值        }    }    var tempCancelUrl = $("#cancel").attr("href");    if (tempCancelUrl.indexOf("?") < 0) {        $("#cancel").attr("href", tempCancelUrl)    }    else {    }</script></body></html>